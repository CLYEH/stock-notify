# 股票分析系統版本比較

## 📊 main.py vs main2.py 差異對比

| 項目 | main.py (v1) | main2.py (v2) |
|------|-------------|---------------|
| **J值判斷邏輯** | 絕對值判斷 | 趨勢變化判斷 |
| **買進條件** | J < 10 且 PE < 20 | 昨日J>10 且 今日J<10 且 PE < 20 |
| **賣出條件** | J > 90 且 PE > 40 | 昨日J<90 且 今日J>90 且 PE > 40 |
| **分析重點** | 當前超買/超賣狀態 | J值突破趨勢變化 |
| **適用場景** | 識別極端超買超賣 | 捕捉轉折點信號 |

## 🔍 詳細功能差異

### V1 (main.py) - 絕對值判斷
```
買進信號：當前 J 值 < 10 (超賣) + PE < 20
賣出信號：當前 J 值 > 90 (超買) + PE > 40
```

**特點：**
- ✅ 邏輯簡單直觀
- ✅ 能識別明顯的超買超賣區域
- ⚠️ 可能在極端區域停留過久
- ⚠️ 無法捕捉早期轉折信號

### V2 (main2.py) - 趨勢突破判斷
```
買進信號：J值向下突破 (昨日>10 → 今日<10) + PE < 20
賣出信號：J值向上突破 (昨日<90 → 今日>90) + PE > 40
```

**特點：**
- ✅ 能捕捉關鍵轉折點
- ✅ 避免在極端區域長期等待
- ✅ 更敏感的進出場時機
- ⚠️ 可能增加假突破的風險

## 🎯 新增功能 (V2)

1. **J值趨勢分析函數**：
   ```python
   def analyze_j_value_trend(self, kdj_result):
       # 分析昨日vs今日J值變化
       # 檢測向上/向下突破
   ```

2. **詳細趨勢資訊**：
   - 記錄昨日和今日的J值
   - 計算變化幅度
   - 識別突破類型

3. **增強的顯示格式**：
   ```
   🔴 買進: 台積電 (2330) - PE: 18.5, J: 12.3→8.7 [✅可靠 (30 天)]
   ```

## 🚀 使用建議

### 使用 V1 (main.py) 當：
- 希望捕捉明顯的極端超買超賣機會
- 偏好保守的交易策略
- 資料品質不穩定時

### 使用 V2 (main2.py) 當：
- 希望更早捕捉轉折信號
- 偏好積極的交易策略
- 有穩定的歷史資料時

## 📋 執行方式

```bash
# 執行 V1 版本
./venv/bin/python main.py

# 執行 V2 版本
./venv/bin/python main2.py
```

## 💡 建議策略

可以同時運行兩個版本，比較結果：
- V1 提供穩健的長期信號
- V2 提供敏感的短期信號
- 結合使用可以獲得更全面的市場視角

## ⚠️ 注意事項

1. **資料要求**：兩個版本都需要至少30天的歷史資料
2. **風險控制**：V2 版本信號更頻繁，需要更嚴格的風險管理
3. **回測驗證**：建議先進行歷史回測，確認策略有效性
4. **市場環境**：不同市場環境下，兩種策略的表現可能有差異
